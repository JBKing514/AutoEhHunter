import{h as al,af as tl,aH as ol,ag as nl,aI as il,q as ce,aJ as sl,aK as rl,aL as ul,w as oe,A as dl,av as G,D as o,B as i,am as W,aM as ml,G as M,at as De,F as L,aN as vl,a5 as Pe,a7 as he,aO as cl,a4 as fl,aP as hl,aQ as pl,aR as gl,aS as yl,au as se,aT as bl,a8 as _,a9 as x,E as kl,ar as v,aU as Vl,b as H,H as q,aV as Se,aW as Cl,aX as wl,x as Ie,s as j,I as Sl,aY as Ae,N as Il,Q as Al,aZ as Dl,a_ as Pl,a$ as Tl,b0 as Fl,b1 as El,b2 as Rl,$ as d,a2 as p,a1 as n,ay as U,a0 as D,b3 as Ll,a3 as T,b4 as $l,as as s,b5 as ne,aB as Hl,ad as g,aw as ie,b6 as Ml,b7 as z,a6 as Z,b8 as Bl,b9 as Ul}from"./index-DWWWBiwt.js";import{_ as Nl}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as zl,a as fe}from"./VTabs-BNt32J-R.js";const Kl=Il({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...Tl({filterKeys:["title"]}),...Pl(),...Al(Dl({modelValue:null,role:"combobox"}),["validationValue","dirty"])},"VAutocomplete"),Ol=al()({name:"VAutocomplete",props:Kl(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:r}=t;const{t:pe}=tl(),w=q(),P=j(!1),l=j(!0),A=j(!1),K=q(),re=q(),y=j(-1),O=j(null),{items:ue,transformIn:Te,transformOut:Fe}=ol(e),{textColorClasses:Ee,textColorStyles:Re}=nl(()=>{var a;return(a=w.value)==null?void 0:a.color}),{InputIcon:Le}=il(e),b=ce(e,"search",""),c=ce(e,"modelValue",[],a=>Te(a===null?[null]:El(a)),a=>{const u=Fe(a);return e.multiple?u:u[0]??null}),$e=H(()=>typeof e.counterValue=="function"?e.counterValue(c.value):typeof e.counterValue=="number"?e.counterValue:c.value.length),Q=sl(e),{filteredItems:ee,getMatches:He}=rl(e,ue,()=>O.value??(l.value?"":b.value)),F=H(()=>e.hideSelected&&O.value===null?ee.value.filter(a=>!c.value.some(u=>u.value===a.value)):ee.value),ge=Sl(()=>e.closableChips&&!Q.isReadonly.value&&!Q.isDisabled.value),le=H(()=>!!(e.chips||r.chip)),J=H(()=>le.value||!!r.selection),Me=H(()=>c.value.map(a=>a.props.value)),X=H(()=>F.value.find(a=>a.type==="item"&&!a.props.disabled)),de=H(()=>{var u;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&b.value===((u=X.value)==null?void 0:u.title))&&F.value.length>0&&!l.value&&!A.value}),ae=H(()=>e.hideNoData&&!F.value.length||Q.isReadonly.value||Q.isDisabled.value),me=ce(e,"menu"),V=H({get:()=>me.value,set:a=>{var u;me.value&&!a&&((u=K.value)!=null&&u.Î¨openChildren.size)||a&&ae.value||(me.value=a)}}),{menuId:Be,ariaExpanded:Ue,ariaControls:Ne}=ul(e,V),Y=q(),ye=q(),be=q(),ze=Cl(Y,w),{onTabKeydown:Ke}=Fl({groups:[{type:"element",contentRef:ye},{type:"list",contentRef:Y,displayItemsCount:()=>F.value.length},{type:"element",contentRef:be}],onLeave:()=>{var a;V.value=!1,(a=w.value)==null||a.focus()}});function Oe(a){e.openOnClear&&(V.value=!0),b.value=""}function Qe(){ae.value||(V.value=!0)}function qe(a){ae.value||(P.value&&(a.preventDefault(),a.stopPropagation()),V.value=!V.value)}function je(a){var u,m;a.key==="Tab"&&Ke(a),(u=Y.value)!=null&&u.$el.contains(a.target)&&(Se(a)||a.key==="Backspace")&&((m=w.value)==null||m.focus())}function Ge(a){var E,C,B,f,S;if(Q.isReadonly.value)return;const u=(E=w.value)==null?void 0:E.selectionStart,m=c.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(a.key)&&a.preventDefault(),["Enter","ArrowDown"].includes(a.key)&&(V.value=!0),["Escape"].includes(a.key)&&(V.value=!1),de.value&&["Enter","Tab"].includes(a.key)&&X.value&&!c.value.some(k=>{let{value:$}=k;return $===X.value.value})&&N(X.value),a.key==="ArrowDown"&&de.value&&((C=Y.value)==null||C.focus("next")),["Backspace","Delete"].includes(a.key)){if(!e.multiple&&J.value&&c.value.length>0&&!b.value)return N(c.value[0],!1);if(~y.value){a.preventDefault();const k=y.value;N(c.value[y.value],!1),y.value=k>=m-1?m-2:k}else a.key==="Backspace"&&!b.value&&(y.value=m-1);return}if(e.multiple)if(a.key==="ArrowLeft"){if(y.value<0&&u&&u>0)return;const k=y.value>-1?y.value-1:m-1;if(c.value[k])y.value=k;else{const $=((B=b.value)==null?void 0:B.length)??null;y.value=-1,(f=w.value)==null||f.setSelectionRange($,$)}}else if(a.key==="ArrowRight"){if(y.value<0)return;const k=y.value+1;c.value[k]?y.value=k:(y.value=-1,(S=w.value)==null||S.setSelectionRange(0,0))}else~y.value&&Se(a)&&(y.value=-1)}function We(a){if(Ae(w.value,":autofill")||Ae(w.value,":-webkit-autofill")){const u=ue.value.find(m=>m.title===a.target.value);u&&N(u)}}function Je(){var a;e.eager&&((a=re.value)==null||a.calculateVisibleItems())}function Xe(){var a;P.value&&(l.value=!0,(a=w.value)==null||a.focus()),O.value=null}function Ye(a){P.value=!0,setTimeout(()=>{A.value=!0})}function Ze(a){A.value=!1}function _e(a){(a==null||a===""&&!e.multiple&&!J.value)&&(c.value=[])}function xe(a){var m;const u=(m=K.value)==null?void 0:m.contentEl;u!=null&&u.contains(a.relatedTarget)&&(P.value=!0)}const ve=j(!1);function N(a){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!a||a.props.disabled))if(e.multiple){const m=c.value.findIndex(C=>(e.valueComparator||wl)(C.value,a.value)),E=u??!~m;if(~m){const C=E?[...c.value,a]:[...c.value];C.splice(m,1),c.value=C}else E&&(c.value=[...c.value,a]);e.clearOnSelect&&(b.value="")}else{const m=u!==!1;c.value=m?[a]:[],O.value=l.value?"":b.value??"",b.value=m&&!J.value?a.title:"",Ie(()=>{V.value=!1,l.value=!0})}}return oe(P,(a,u)=>{var m;a!==u&&(a?(ve.value=!0,b.value=e.multiple||J.value?"":String(((m=c.value.at(-1))==null?void 0:m.props.title)??""),l.value=!0,Ie(()=>ve.value=!1)):(!e.multiple&&b.value==null&&(c.value=[]),V.value=!1,!l.value&&b.value&&(O.value=b.value),b.value="",y.value=-1))}),oe(b,a=>{!P.value||ve.value||(a&&(V.value=!0),l.value=!a)}),oe(V,a=>{if(!e.hideSelected&&a&&c.value.length&&l.value){const u=F.value.findIndex(m=>c.value.some(E=>m.value===E.value));Rl&&window.requestAnimationFrame(()=>{var m;u>=0&&((m=re.value)==null||m.scrollToIndex(u))})}a&&(O.value=null)}),oe(ue,(a,u)=>{V.value||P.value&&!u.length&&a.length&&(V.value=!0)}),dl(()=>{const a=!!(!e.hideNoData||F.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),u=c.value.length>0,m=G.filterProps(e),E={search:b,filteredItems:ee.value};return o(G,L({ref:w},m,{modelValue:b.value,"onUpdate:modelValue":[C=>b.value=C,_e],focused:P.value,"onUpdate:focused":C=>P.value=C,validationValue:c.externalValue,counterValue:$e.value,dirty:u,onChange:We,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":V.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!J.value,"v-autocomplete--selecting-index":y.value>-1},e.class],style:e.style,readonly:Q.isReadonly.value,placeholder:u?void 0:e.placeholder,"onClick:clear":Oe,"onMousedown:control":Qe,onKeydown:Ge,onBlur:xe,"aria-expanded":Ue.value,"aria-controls":Ne.value}),{...r,default:C=>{let{id:B}=C;return i(M,null,[o(De,L({id:Be.value,ref:K,modelValue:V.value,"onUpdate:modelValue":f=>V.value=f,activator:"parent",contentClass:"v-autocomplete__content",disabled:ae.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,onAfterEnter:Je,onAfterLeave:Xe},e.menuProps),{default:()=>[o(vl,{onFocusin:Ye,onKeydown:je},{default:()=>[r["menu-header"]&&i("header",{ref:ye},[r["menu-header"](E)]),a&&o(Pe,L({key:"autocomplete-list",ref:Y,filterable:!0,selected:Me.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:f=>f.preventDefault(),onFocusout:Ze,tabindex:"-1",selectable:!!F.value.length,"aria-live":"polite","aria-labelledby":`${B.value}-label`,"aria-multiselectable":e.multiple,color:e.itemColor??e.color},ze,e.listProps),{default:()=>{var f,S,k;return[(f=r["prepend-item"])==null?void 0:f.call(r),!F.value.length&&!e.hideNoData&&(((S=r["no-data"])==null?void 0:S.call(r))??o(he,{key:"no-data",title:pe(e.noDataText)},null)),o(cl,{ref:re,renderless:!0,items:F.value,itemKey:"value"},{default:$=>{var Ve,Ce,we;let{item:h,index:R,itemRef:I}=$;const ke=L(h.props,{ref:I,key:h.value,active:de.value&&h===X.value?!0:void 0,onClick:()=>N(h,null),"aria-posinset":R+1,"aria-setsize":F.value.length});return h.type==="divider"?((Ve=r.divider)==null?void 0:Ve.call(r,{props:h.raw,index:R}))??o(fl,L(h.props,{key:`divider-${R}`}),null):h.type==="subheader"?((Ce=r.subheader)==null?void 0:Ce.call(r,{props:h.raw,index:R}))??o(hl,L(h.props,{key:`subheader-${R}`}),null):((we=r.item)==null?void 0:we.call(r,{item:h,index:R,props:ke}))??o(he,L(ke,{role:"option"}),{prepend:te=>{let{isSelected:el}=te;return i(M,null,[e.multiple&&!e.hideSelected?o(gl,{key:h.value,modelValue:el,ripple:!1,tabindex:"-1","aria-hidden":!0,onClick:ll=>ll.preventDefault()},null):void 0,h.props.prependAvatar&&o(yl,{image:h.props.prependAvatar},null),h.props.prependIcon&&o(W,{icon:h.props.prependIcon},null)])},title:()=>{var te;return l.value?h.title:pl("v-autocomplete",h.title,(te=He(h))==null?void 0:te.title)}})}}),(k=r["append-item"])==null?void 0:k.call(r)]}}),r["menu-footer"]&&i("footer",{ref:be},[r["menu-footer"](E)])]})]}),c.value.map((f,S)=>{function k(I){I.stopPropagation(),I.preventDefault(),N(f,!1)}const $=L(se.filterProps(f.props),{"onClick:close":k,onKeydown(I){I.key!=="Enter"&&I.key!==" "||(I.preventDefault(),I.stopPropagation(),k(I))},onMousedown(I){I.preventDefault(),I.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0}),h=le.value?!!r.chip:!!r.selection,R=h?bl(le.value?r.chip({item:f,index:S,props:$}):r.selection({item:f,index:S})):void 0;if(!(h&&!R))return i("div",{key:f.value,class:x(["v-autocomplete__selection",S===y.value&&["v-autocomplete__selection--selected",Ee.value]]),style:_(S===y.value?Re.value:{})},[le.value?r.chip?o(kl,{key:"chip-defaults",defaults:{VChip:{closable:ge.value,size:"small",text:f.title}}},{default:()=>[R]}):o(se,L({key:"chip",closable:ge.value,size:"small",text:f.title,disabled:f.props.disabled},$),null):R??i("span",{class:"v-autocomplete__selection-text"},[f.title,e.multiple&&S<c.value.length-1&&i("span",{class:"v-autocomplete__selection-comma"},[v(",")])])])})])},"append-inner":function(){var S,k;for(var C=arguments.length,B=new Array(C),f=0;f<C;f++)B[f]=arguments[f];return i(M,null,[(S=r["append-inner"])==null?void 0:S.call(r,...B),e.menuIcon?o(W,{class:"v-autocomplete__menu-icon",color:(k=w.value)==null?void 0:k.fieldIconColor,icon:e.menuIcon,onMousedown:qe,onClick:ml,"aria-hidden":!0,tabindex:"-1"},null):void 0,e.appendInnerIcon&&o(Le,{key:"append-icon",name:"appendInner",color:B[0].iconColor.value},null)])}})}),Vl({isFocused:P,isPristine:l,menu:V,search:b,filteredItems:ee,select:N},w)}}),Ql={setup(){return Hl()},mounted(){this.$nextTick(()=>{typeof this.bindHomeInfiniteScroll=="function"&&this.bindHomeInfiniteScroll()})},watch:{homeTab(){const e=this.activeHomeState||{};(!Array.isArray(e.items)||!e.items.length)&&typeof this.resetHomeFeed=="function"&&this.resetHomeFeed().catch(()=>null),this.$nextTick(()=>{typeof this.bindHomeInfiniteScroll=="function"&&this.bindHomeInfiniteScroll()})},filterTagInput(){typeof this.loadTagSuggestions=="function"&&this.loadTagSuggestions().catch(()=>null)}}},ql={class:"d-flex align-center ga-2 flex-wrap"},jl={class:"d-flex align-center justify-space-between mt-3 flex-wrap ga-2"},Gl={class:"text-body-2"},Wl={class:"text-caption text-medium-emphasis"},Jl={class:"d-flex justify-end mt-2"},Xl=["href"],Yl={class:"list-cover"},Zl=["src"],_l={class:"cover-anchor"},xl={class:"cover-ph"},ea=["src"],la={key:0,class:"cover-title-overlay"},aa={key:0,class:"pa-2"},ta=["href"],oa={class:"text-caption text-medium-emphasis text-truncate"},na={class:"hover-cover-wrap mb-2"},ia=["src"],sa={key:1,class:"hover-cover hover-fallback"},ra=["href"],ua={key:0,class:"text-caption text-medium-emphasis mb-1"},da={class:"d-flex flex-wrap ga-1"},ma={ref:"homeSentinel",class:"home-sentinel"},va={key:4,class:"text-center py-3"},ca={key:5,class:"text-center text-medium-emphasis py-8"},fa={class:"d-flex justify-space-between mb-1"},ha={class:"hover-cover-wrap mb-2"},pa=["src"],ga={key:1,class:"hover-cover hover-fallback"},ya=["href"],ba={key:0,class:"text-caption text-medium-emphasis mb-1"},ka={class:"d-flex flex-wrap ga-1"},Va={class:"text-subtitle-1 font-weight-medium mb-2"},Ca={class:"text-body-2"},wa={class:"text-caption text-medium-emphasis"},Sa={class:"d-flex ga-2 mt-3 justify-end"},Ia={class:"text-subtitle-1 font-weight-medium mb-2"},Aa={class:"text-caption text-medium-emphasis mb-3"},Da={class:"text-body-2 mb-2"},Pa={class:"d-flex ga-2 mb-2"},Ta={class:"d-flex flex-wrap ga-2 mb-3"},Fa={class:"d-flex justify-space-between mt-2"},Ea={class:"d-flex justify-end ga-2 mt-3"},Ra={class:"text-subtitle-1 font-weight-medium mb-2"},La={class:"d-flex ga-2 mt-3 justify-end"};function $a(e,t,r,pe,w,P){return d(),p(M,null,[o(U,{class:"pa-4 mb-4"},{default:n(()=>[i("div",ql,[o(g,{icon:"mdi-camera-outline",variant:"text",onClick:t[0]||(t[0]=l=>e.imageSearchDialog=!0)}),o(g,{color:e.config.SEARCH_NL_ENABLED?"primary":void 0,variant:e.config.SEARCH_NL_ENABLED?"tonal":"text",icon:"mdi-robot-outline",onClick:t[1]||(t[1]=l=>e.config.SEARCH_NL_ENABLED=!e.config.SEARCH_NL_ENABLED)},null,8,["color","variant"]),o(G,{modelValue:e.homeSearchQuery,"onUpdate:modelValue":t[2]||(t[2]=l=>e.homeSearchQuery=l),class:"home-search-input",density:"compact","hide-details":"",label:e.t("home.search.placeholder"),variant:"outlined",onKeyup:ie(e.runHomeSearchPlaceholder,["enter"])},null,8,["modelValue","label","onKeyup"]),o(g,{color:"primary",variant:"tonal","prepend-icon":"mdi-magnify",onClick:e.runHomeSearchPlaceholder},{default:n(()=>[v(s(e.t("home.search.go")),1)]),_:1},8,["onClick"]),o(g,{icon:"mdi-filter-variant",variant:"text",onClick:t[3]||(t[3]=l=>e.homeFiltersOpen=!0)})]),i("div",jl,[o(zl,{modelValue:e.homeTab,"onUpdate:modelValue":t[4]||(t[4]=l=>e.homeTab=l),density:"comfortable",color:"primary"},{default:n(()=>[o(fe,{value:"history"},{default:n(()=>[v(s(e.t("home.tab.history")),1)]),_:1}),o(fe,{value:"recommend"},{default:n(()=>[v(s(e.t("home.tab.recommend")),1)]),_:1}),o(fe,{value:"search"},{default:n(()=>[v(s(e.t("home.tab.search")),1)]),_:1})]),_:1},8,["modelValue"]),o(Ml,{modelValue:e.homeViewMode,"onUpdate:modelValue":t[5]||(t[5]=l=>e.homeViewMode=l),mandatory:"",variant:"outlined",class:"home-view-toggle"},{default:n(()=>[o(g,{value:"wide"},{default:n(()=>[v(s(e.t("home.view.wide")),1)]),_:1}),o(g,{value:"compact"},{default:n(()=>[v(s(e.t("home.view.compact")),1)]),_:1}),o(g,{value:"list"},{default:n(()=>[v(s(e.t("home.view.list")),1)]),_:1})]),_:1},8,["modelValue"])])]),_:1}),e.activeHomeState.error?(d(),D(Ll,{key:0,type:"warning",class:"mb-3"},{default:n(()=>[v(s(e.activeHomeState.error),1)]),_:1})):T("",!0),e.homeTab==="search"?(d(),D(U,{key:1,class:"pa-3 mb-3",variant:"flat"},{default:n(()=>[i("div",{class:x(["upload-dropzone",{active:e.imageDropActive}]),onDragover:t[6]||(t[6]=z(l=>e.imageDropActive=!0,["prevent"])),onDragleave:t[7]||(t[7]=z(l=>e.imageDropActive=!1,["prevent"])),onDrop:t[8]||(t[8]=z((...l)=>e.onImageDrop&&e.onImageDrop(...l),["prevent"])),onClick:t[9]||(t[9]=(...l)=>e.triggerImagePicker&&e.triggerImagePicker(...l))},[i("div",Gl,s(e.selectedImageFile?e.selectedImageFile.name:e.t("home.image_upload.hint")),1),i("div",Wl,s(e.t("home.image_upload.subhint")),1)],34),o(G,{modelValue:e.imageSearchQuery,"onUpdate:modelValue":t[10]||(t[10]=l=>e.imageSearchQuery=l),class:"mt-2",density:"compact",variant:"outlined",label:e.t("home.search.extra_text"),hint:e.t("home.search.extra_text_hint"),"persistent-hint":"",onKeyup:ie(e.runImageUploadSearch,["enter"])},null,8,["modelValue","label","hint","onKeyup"]),i("div",Jl,[o(g,{color:"primary",disabled:!e.selectedImageFile,onClick:e.runImageUploadSearch},{default:n(()=>[v(s(e.t("home.image_upload.search")),1)]),_:1},8,["disabled","onClick"])])]),_:1})):T("",!0),e.homeViewMode==="list"?(d(),D(Pe,{key:2,class:"mb-2",lines:"two"},{default:n(()=>[(d(!0),p(M,null,Z(e.filteredHomeItems,l=>(d(),D(he,{key:l.id,subtitle:e.itemSubtitle(l)},{title:n(()=>[i("a",{href:e.itemPrimaryLink(l),target:"_blank",rel:"noopener noreferrer",class:"cover-link-title"},s(l.title||"-"),9,Xl)]),prepend:n(()=>[i("div",Yl,[l.thumb_url?(d(),p("div",{key:0,class:"cover-bg-blur list-blur",style:_({backgroundImage:`url(${l.thumb_url})`})},null,4)):T("",!0),l.thumb_url?(d(),p("img",{key:1,src:l.thumb_url,alt:"cover",class:"cover-img list-cover-img",loading:"lazy"},null,8,Zl)):(d(),D(W,{key:2,size:"18"},{default:n(()=>[...t[28]||(t[28]=[v("mdi-image-outline",-1)])]),_:1}))])]),_:2},1032,["subtitle"]))),128))]),_:1})):(d(),D($l,{key:3},{default:n(()=>[(d(!0),p(M,null,Z(e.filteredHomeItems,l=>(d(),D(Bl,{key:l.id,cols:"12",sm:e.homeViewMode==="wide"?6:4,md:e.homeViewMode==="wide"?4:3,lg:e.homeViewMode==="wide"?3:2},{default:n(()=>[o(De,{"open-on-hover":!e.isMobile,"open-on-click":!e.isMobile,location:"end","open-delay":1e3,"close-delay":180,"max-width":"480"},{activator:n(({props:A})=>[o(U,L({ref_for:!0},A,{class:["home-card",{compact:e.homeViewMode==="compact"}],variant:"flat",onTouchstartPassive:K=>e.onCardTouchStart(l),onTouchendPassive:e.onCardTouchEnd,onTouchcancelPassive:e.onCardTouchEnd,onClick:K=>e.onCoverClick(l)}),{default:n(()=>[i("div",_l,[i("div",xl,[l.thumb_url?(d(),p("div",{key:0,class:"cover-bg-blur",style:_({backgroundImage:`url(${l.thumb_url})`})},null,4)):T("",!0),l.thumb_url?(d(),p("img",{key:1,src:l.thumb_url,alt:"cover",class:"cover-img",loading:"lazy"},null,8,ea)):(d(),D(W,{key:2,size:"30"},{default:n(()=>[...t[29]||(t[29]=[v("mdi-image-outline",-1)])]),_:1})),e.categoryLabel(l)?(d(),p("div",{key:3,class:"cat-badge",style:_(e.categoryBadgeStyle(l))},s(e.categoryLabel(l)),5)):T("",!0)]),e.homeViewMode==="compact"?(d(),p("div",la,s(l.title||"-"),1)):T("",!0)]),e.homeViewMode!=="compact"?(d(),p("div",aa,[i("a",{href:e.itemPrimaryLink(l),target:"_blank",rel:"noopener noreferrer",class:"text-body-2 font-weight-medium text-truncate cover-link-title d-block"},s(l.title||"-"),9,ta),i("div",oa,s(e.itemSubtitle(l)),1)])):T("",!0)]),_:2},1040,["class","onTouchstartPassive","onTouchendPassive","onTouchcancelPassive","onClick"])]),default:n(()=>[o(U,{class:"pa-2 hover-preview-card",variant:"flat"},{default:n(()=>[i("div",na,[l.thumb_url?(d(),p("img",{key:0,src:l.thumb_url,alt:"cover",class:"hover-cover"},null,8,ia)):(d(),p("div",sa,[o(W,{size:"42"},{default:n(()=>[...t[30]||(t[30]=[v("mdi-image-outline",-1)])]),_:1})]))]),i("a",{href:e.itemPrimaryLink(l),target:"_blank",rel:"noopener noreferrer",class:"text-body-2 font-weight-medium mb-1 cover-link-title d-inline-block"},s(l.title||"-"),9,ra),e.categoryLabel(l)?(d(),p("div",ua,s(e.categoryLabel(l)),1)):T("",!0),i("div",da,[(d(!0),p(M,null,Z(e.itemHoverTags(l),A=>(d(),D(se,{key:`${l.id}-${A}`,size:"x-small",variant:"outlined",class:x(["hover-tag",{active:e.isTagFilterActive(A)}]),onClick:z(K=>e.toggleTagFilter(A),["stop"])},{default:n(()=>[v(s(A),1)]),_:2},1032,["class","onClick"]))),128))])]),_:2},1024)]),_:2},1032,["open-on-hover","open-on-click"])]),_:2},1032,["sm","md","lg"]))),128))]),_:1})),i("div",ma,null,512),e.activeHomeState.loading?(d(),p("div",va,[o(Ul,{indeterminate:"",color:"primary",size:"24"})])):e.filteredHomeItems.length?T("",!0):(d(),p("div",ca,s(e.t("home.empty")),1)),o(ne,{"model-value":!!e.mobilePreviewItem,"max-width":"560","content-class":"mobile-preview-dialog","onUpdate:modelValue":e.onMobilePreviewToggle},{default:n(()=>[e.mobilePreviewItem?(d(),D(U,{key:0,class:"pa-2 hover-preview-card",variant:"flat"},{default:n(()=>[i("div",fa,[o(g,{size:"x-small",icon:"mdi-close-circle",color:"error",variant:"tonal",onClick:t[11]||(t[11]=l=>e.mobilePreviewItem=null)})]),i("div",ha,[e.mobilePreviewItem.thumb_url?(d(),p("img",{key:0,src:e.mobilePreviewItem.thumb_url,alt:"cover",class:"hover-cover"},null,8,pa)):(d(),p("div",ga,[o(W,{size:"42"},{default:n(()=>[...t[31]||(t[31]=[v("mdi-image-outline",-1)])]),_:1})]))]),i("a",{href:e.itemPrimaryLink(e.mobilePreviewItem),class:"text-body-2 font-weight-medium mb-1 cover-link-title d-inline-block",target:"_blank",rel:"noopener noreferrer",onClick:t[12]||(t[12]=(...l)=>e.onMobileDetailLinkClick&&e.onMobileDetailLinkClick(...l))},s(e.mobilePreviewItem.title||"-"),9,ya),e.categoryLabel(e.mobilePreviewItem)?(d(),p("div",ba,s(e.categoryLabel(e.mobilePreviewItem)),1)):T("",!0),i("div",ka,[(d(!0),p(M,null,Z(e.itemHoverTags(e.mobilePreviewItem),l=>(d(),D(se,{key:`m-${e.mobilePreviewItem.id}-${l}`,size:"x-small",variant:"outlined",class:x(["hover-tag",{active:e.isTagFilterActive(l)}]),onClick:A=>e.toggleTagFilter(l)},{default:n(()=>[v(s(l),1)]),_:2},1032,["class","onClick"]))),128))])]),_:1})):T("",!0)]),_:1},8,["model-value","onUpdate:modelValue"]),o(ne,{modelValue:e.imageSearchDialog,"onUpdate:modelValue":t[20]||(t[20]=l=>e.imageSearchDialog=l),"max-width":"560"},{default:n(()=>[o(U,{class:"pa-4",variant:"flat"},{default:n(()=>[i("div",Va,s(e.t("home.image_upload.title")),1),i("div",{class:x(["upload-dropzone",{active:e.imageDropActive}]),onDragover:t[13]||(t[13]=z(l=>e.imageDropActive=!0,["prevent"])),onDragleave:t[14]||(t[14]=z(l=>e.imageDropActive=!1,["prevent"])),onDrop:t[15]||(t[15]=z((...l)=>e.onImageDrop&&e.onImageDrop(...l),["prevent"])),onClick:t[16]||(t[16]=(...l)=>e.triggerImagePicker&&e.triggerImagePicker(...l))},[i("div",Ca,s(e.selectedImageFile?e.selectedImageFile.name:e.t("home.image_upload.hint")),1),i("div",wa,s(e.t("home.image_upload.subhint")),1)],34),i("input",{ref:"imageFileInputRef",type:"file",accept:"image/*",class:"d-none",onChange:t[17]||(t[17]=(...l)=>e.onImagePickChange&&e.onImagePickChange(...l))},null,544),o(G,{modelValue:e.imageSearchQuery,"onUpdate:modelValue":t[18]||(t[18]=l=>e.imageSearchQuery=l),class:"mt-3",density:"compact",variant:"outlined",label:e.t("home.search.extra_text"),hint:e.t("home.search.extra_text_hint"),"persistent-hint":"",onKeyup:ie(e.runImageUploadSearch,["enter"])},null,8,["modelValue","label","hint","onKeyup"]),i("div",Sa,[o(g,{variant:"text",onClick:t[19]||(t[19]=l=>e.imageSearchDialog=!1)},{default:n(()=>[v(s(e.t("home.image_upload.cancel")),1)]),_:1}),o(g,{color:"primary",disabled:!e.selectedImageFile,onClick:e.runImageUploadSearch},{default:n(()=>[v(s(e.t("home.image_upload.search")),1)]),_:1},8,["disabled","onClick"])])]),_:1})]),_:1},8,["modelValue"]),o(ne,{modelValue:e.homeFiltersOpen,"onUpdate:modelValue":t[24]||(t[24]=l=>e.homeFiltersOpen=l),"max-width":"680"},{default:n(()=>[o(U,{class:"pa-4",variant:"flat"},{default:n(()=>[i("div",Ia,s(e.t("home.filter.title")),1),i("div",Aa,s(e.t("home.filter.hint")),1),i("div",Da,s(e.t("home.filter.categories")),1),i("div",Pa,[o(g,{size:"small",variant:"outlined",onClick:e.selectAllHomeFilterCategories},{default:n(()=>[v(s(e.t("home.filter.select_all")),1)]),_:1},8,["onClick"]),o(g,{size:"small",variant:"outlined",onClick:e.clearAllHomeFilterCategories},{default:n(()=>[v(s(e.t("home.filter.select_none")),1)]),_:1},8,["onClick"])]),i("div",Ta,[(d(!0),p(M,null,Z(e.ehCategoryDefs,l=>(d(),D(g,{key:`f-${l.key}`,class:"category-btn",style:_(e.homeFilterCategoryStyle(l.key,l.color)),onClick:A=>e.toggleHomeFilterCategory(l.key)},{default:n(()=>[v(s(l.label),1)]),_:2},1032,["style","onClick"]))),128))]),o(Ol,{modelValue:e.homeFilters.tags,"onUpdate:modelValue":t[21]||(t[21]=l=>e.homeFilters.tags=l),search:e.filterTagInput,"onUpdate:search":t[22]||(t[22]=l=>e.filterTagInput=l),items:e.filterTagSuggestions,multiple:"",chips:"","closable-chips":"",clearable:"",label:e.t("home.filter.tags"),hint:e.t("home.filter.tags_hint"),"persistent-hint":""},null,8,["modelValue","search","items","label","hint"]),i("div",Fa,[o(g,{size:"small",color:e.config.SEARCH_TAG_SMART_ENABLED?"primary":void 0,variant:e.config.SEARCH_TAG_SMART_ENABLED?"tonal":"outlined",onClick:t[23]||(t[23]=l=>e.config.SEARCH_TAG_SMART_ENABLED=!e.config.SEARCH_TAG_SMART_ENABLED)},{default:n(()=>[v(s(e.t("home.filter.smart")),1)]),_:1},8,["color","variant"])]),i("div",Ea,[o(g,{variant:"text",onClick:e.clearHomeFilters},{default:n(()=>[v(s(e.t("home.filter.clear")),1)]),_:1},8,["onClick"]),o(g,{color:"primary",onClick:e.applyHomeFilters},{default:n(()=>[v(s(e.t("home.filter.apply")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),o(ne,{modelValue:e.quickSearchOpen,"onUpdate:modelValue":t[27]||(t[27]=l=>e.quickSearchOpen=l),"max-width":"560"},{default:n(()=>[o(U,{class:"pa-4",variant:"flat"},{default:n(()=>[i("div",Ra,s(e.t("home.search.quick_title")),1),o(G,{modelValue:e.homeSearchQuery,"onUpdate:modelValue":t[25]||(t[25]=l=>e.homeSearchQuery=l),density:"compact","hide-details":"",label:e.t("home.search.placeholder"),variant:"outlined",onKeyup:ie(e.runQuickSearch,["enter"])},null,8,["modelValue","label","onKeyup"]),i("div",La,[o(g,{variant:"text",onClick:t[26]||(t[26]=l=>e.quickSearchOpen=!1)},{default:n(()=>[v(s(e.t("home.image_upload.cancel")),1)]),_:1}),o(g,{color:"primary",variant:"tonal",onClick:e.runQuickSearch},{default:n(()=>[v(s(e.t("home.search.go")),1)]),_:1},8,["onClick"]),o(g,{color:"secondary",variant:"tonal",onClick:e.quickImageSearch},{default:n(()=>[v(s(e.t("home.image_upload.title")),1)]),_:1},8,["onClick"]),o(g,{color:"primary",variant:"text",onClick:e.openQuickFilters},{default:n(()=>[v(s(e.t("home.filter.title")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"])],64)}const Ua=Nl(Ql,[["render",$a]]);export{Ua as default};
