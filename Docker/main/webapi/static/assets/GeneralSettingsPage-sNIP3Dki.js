import{$ as T,a2 as _,D as e,a1 as o,ay as p,G as w,aD as D,aG as P,B as r,as as d,b4 as f,b8 as t,av as n,ax as A,ad as g,ar as i,au as V,a0 as O,a3 as R,bz as I}from"./index-DWWWBiwt.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as C}from"./VSwitch-F0PbMuzg.js";const h={setup(){return D()}},v={class:"text-subtitle-1 font-weight-medium mb-3"},k={class:"text-subtitle-1 font-weight-medium mb-3"},H={class:"text-subtitle-1 font-weight-medium mb-3"},y={class:"text-subtitle-1 font-weight-medium mb-3"},F={class:"text-subtitle-1 font-weight-medium mb-3"},L={class:"text-subtitle-1 font-weight-medium mb-3"},G={class:"text-subtitle-1 font-weight-medium mb-3"},N={key:0,class:"text-caption text-medium-emphasis mt-1"},c={class:"model-log-view mono"};function Y(l,s,B,K,$,z){const U=P("service-chip");return T(),_(w,null,[e(p,{class:"pa-4 mb-4"},{default:o(()=>[r("div",v,d(l.t("dashboard.health")),1),e(f,null,{default:o(()=>[e(t,{cols:"12",md:"6"},{default:o(()=>{var a,u,m,E,b,S;return[e(U,{title:l.t("health.lrr"),ok:(m=(u=(a=l.health)==null?void 0:a.services)==null?void 0:u.lrr)==null?void 0:m.ok,message:(S=(b=(E=l.health)==null?void 0:E.services)==null?void 0:b.lrr)==null?void 0:S.message},null,8,["title","ok","message"])]}),_:1}),e(t,{cols:"12",md:"6"},{default:o(()=>{var a,u,m,E,b,S;return[e(U,{title:l.t("health.llm"),ok:(m=(u=(a=l.health)==null?void 0:a.services)==null?void 0:u.llm)==null?void 0:m.ok,message:(S=(b=(E=l.health)==null?void 0:E.services)==null?void 0:b.llm)==null?void 0:S.message},null,8,["title","ok","message"])]}),_:1})]),_:1})]),_:1}),e(p,{class:"pa-4 mb-4"},{default:o(()=>[r("div",k,d(l.t("settings.section.db")),1),e(f,null,{default:o(()=>[e(t,{cols:"12",md:"4"},{default:o(()=>[e(n,{modelValue:l.config.POSTGRES_HOST,"onUpdate:modelValue":s[0]||(s[0]=a=>l.config.POSTGRES_HOST=a),label:l.labelFor("POSTGRES_HOST")},null,8,["modelValue","label"])]),_:1}),e(t,{cols:"12",md:"2"},{default:o(()=>[e(n,{modelValue:l.config.POSTGRES_PORT,"onUpdate:modelValue":s[1]||(s[1]=a=>l.config.POSTGRES_PORT=a),label:l.labelFor("POSTGRES_PORT"),type:"number"},null,8,["modelValue","label"])]),_:1}),e(t,{cols:"12",md:"3"},{default:o(()=>[e(n,{modelValue:l.config.POSTGRES_DB,"onUpdate:modelValue":s[2]||(s[2]=a=>l.config.POSTGRES_DB=a),label:l.labelFor("POSTGRES_DB")},null,8,["modelValue","label"])]),_:1}),e(t,{cols:"12",md:"3"},{default:o(()=>[e(n,{modelValue:l.config.POSTGRES_USER,"onUpdate:modelValue":s[3]||(s[3]=a=>l.config.POSTGRES_USER=a),label:l.labelFor("POSTGRES_USER")},null,8,["modelValue","label"])]),_:1}),e(t,{cols:"12",md:"6"},{default:o(()=>[e(n,{modelValue:l.config.POSTGRES_PASSWORD,"onUpdate:modelValue":s[4]||(s[4]=a=>l.config.POSTGRES_PASSWORD=a),label:l.labelFor("POSTGRES_PASSWORD"),type:"password",placeholder:l.t("settings.secret.keep"),hint:l.secretHint("POSTGRES_PASSWORD"),"persistent-hint":""},null,8,["modelValue","label","placeholder","hint"])]),_:1}),e(t,{cols:"12",md:"6"},{default:o(()=>[e(A,{modelValue:l.config.POSTGRES_SSLMODE,"onUpdate:modelValue":s[5]||(s[5]=a=>l.config.POSTGRES_SSLMODE=a),items:["disable","allow","prefer","require","verify-ca","verify-full"],label:l.labelFor("POSTGRES_SSLMODE")},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),e(p,{class:"pa-4 mb-4"},{default:o(()=>[r("div",H,d(l.t("settings.section.urls")),1),e(f,null,{default:o(()=>[e(t,{cols:"12",md:"6"},{default:o(()=>[e(n,{modelValue:l.config.LRR_BASE,"onUpdate:modelValue":s[6]||(s[6]=a=>l.config.LRR_BASE=a),label:l.labelFor("LRR_BASE")},null,8,["modelValue","label"])]),_:1}),e(t,{cols:"12",md:"6"},{default:o(()=>[e(n,{modelValue:l.config.OPENAI_HEALTH_URL,"onUpdate:modelValue":s[7]||(s[7]=a=>l.config.OPENAI_HEALTH_URL=a),label:l.labelFor("OPENAI_HEALTH_URL")},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),e(p,{class:"pa-4 mb-4"},{default:o(()=>[r("div",y,d(l.t("settings.section.secrets")),1),e(f,null,{default:o(()=>[e(t,{cols:"12",md:"6"},{default:o(()=>[e(n,{modelValue:l.config.LRR_API_KEY,"onUpdate:modelValue":s[8]||(s[8]=a=>l.config.LRR_API_KEY=a),label:l.labelFor("LRR_API_KEY"),type:"password",placeholder:l.t("settings.secret.keep"),hint:l.secretHint("LRR_API_KEY"),"persistent-hint":""},null,8,["modelValue","label","placeholder","hint"])]),_:1}),e(t,{cols:"12",md:"6"},{default:o(()=>[e(n,{modelValue:l.config.INGEST_API_KEY,"onUpdate:modelValue":s[9]||(s[9]=a=>l.config.INGEST_API_KEY=a),label:l.labelFor("INGEST_API_KEY"),type:"password",placeholder:l.t("settings.secret.keep"),hint:l.secretHint("INGEST_API_KEY"),"persistent-hint":""},null,8,["modelValue","label","placeholder","hint"])]),_:1}),e(t,{cols:"12",md:"6"},{default:o(()=>[e(n,{modelValue:l.config.LLM_API_KEY,"onUpdate:modelValue":s[10]||(s[10]=a=>l.config.LLM_API_KEY=a),label:l.labelFor("LLM_API_KEY"),type:"password",placeholder:l.t("settings.secret.keep"),hint:l.secretHint("LLM_API_KEY"),"persistent-hint":""},null,8,["modelValue","label","placeholder","hint"])]),_:1})]),_:1})]),_:1}),e(p,{class:"pa-4 mb-4"},{default:o(()=>[r("div",F,d(l.t("settings.section.account")),1),e(f,null,{default:o(()=>[e(t,{cols:"12",md:"6"},{default:o(()=>[e(n,{modelValue:l.accountForm.username,"onUpdate:modelValue":s[11]||(s[11]=a=>l.accountForm.username=a),label:l.t("auth.username")},null,8,["modelValue","label"])]),_:1}),e(t,{cols:"12",md:"6",class:"d-flex align-center"},{default:o(()=>[e(g,{color:"primary",variant:"outlined",onClick:l.updateAccountUsername},{default:o(()=>[i(d(l.t("auth.profile.update_username")),1)]),_:1},8,["onClick"])]),_:1}),e(t,{cols:"12",md:"4"},{default:o(()=>[e(n,{modelValue:l.accountForm.oldPassword,"onUpdate:modelValue":s[12]||(s[12]=a=>l.accountForm.oldPassword=a),label:l.t("auth.profile.old_password"),type:"password"},null,8,["modelValue","label"])]),_:1}),e(t,{cols:"12",md:"4"},{default:o(()=>[e(n,{modelValue:l.accountForm.newPassword,"onUpdate:modelValue":s[13]||(s[13]=a=>l.accountForm.newPassword=a),label:l.t("auth.profile.new_password"),type:"password"},null,8,["modelValue","label"])]),_:1}),e(t,{cols:"12",md:"4"},{default:o(()=>[e(n,{modelValue:l.accountForm.newPassword2,"onUpdate:modelValue":s[14]||(s[14]=a=>l.accountForm.newPassword2=a),label:l.t("auth.profile.new_password_confirm"),type:"password"},null,8,["modelValue","label"])]),_:1}),e(t,{cols:"12",md:"6",class:"d-flex align-center"},{default:o(()=>[e(g,{color:"warning",variant:"outlined",onClick:l.updateAccountPassword},{default:o(()=>[i(d(l.t("auth.profile.change_password")),1)]),_:1},8,["onClick"])]),_:1}),e(t,{cols:"12",md:"6",class:"d-flex align-center justify-end"},{default:o(()=>[e(g,{color:"error",variant:"tonal",onClick:l.deleteAccountNow},{default:o(()=>[i(d(l.t("auth.profile.delete_account")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),e(p,{class:"pa-4 mb-4"},{default:o(()=>[r("div",L,d(l.t("settings.section.appearance")),1),e(f,null,{default:o(()=>[e(t,{cols:"12",md:"4"},{default:o(()=>[e(A,{modelValue:l.config.DATA_UI_THEME_MODE,"onUpdate:modelValue":s[15]||(s[15]=a=>l.config.DATA_UI_THEME_MODE=a),items:l.themeModeOptions,"item-title":"title","item-value":"value",label:l.labelFor("DATA_UI_THEME_MODE")},null,8,["modelValue","items","label"])]),_:1}),e(t,{cols:"12",md:"4"},{default:o(()=>[e(A,{modelValue:l.config.DATA_UI_THEME_PRESET,"onUpdate:modelValue":s[16]||(s[16]=a=>l.config.DATA_UI_THEME_PRESET=a),items:l.themeOptions,"item-title":"title","item-value":"value",label:l.labelFor("DATA_UI_THEME_PRESET")},null,8,["modelValue","items","label"])]),_:1}),e(t,{cols:"12",md:"4"},{default:o(()=>[e(C,{modelValue:l.config.DATA_UI_THEME_OLED,"onUpdate:modelValue":s[17]||(s[17]=a=>l.config.DATA_UI_THEME_OLED=a),label:l.labelFor("DATA_UI_THEME_OLED"),"hide-details":""},null,8,["modelValue","label"])]),_:1}),e(t,{cols:"12",md:"4"},{default:o(()=>[e(n,{modelValue:l.config.DATA_UI_THEME_CUSTOM_PRIMARY,"onUpdate:modelValue":s[18]||(s[18]=a=>l.config.DATA_UI_THEME_CUSTOM_PRIMARY=a),label:l.labelFor("DATA_UI_THEME_CUSTOM_PRIMARY"),type:"color"},null,8,["modelValue","label"])]),_:1}),e(t,{cols:"12",md:"4"},{default:o(()=>[e(n,{modelValue:l.config.DATA_UI_THEME_CUSTOM_SECONDARY,"onUpdate:modelValue":s[19]||(s[19]=a=>l.config.DATA_UI_THEME_CUSTOM_SECONDARY=a),label:l.labelFor("DATA_UI_THEME_CUSTOM_SECONDARY"),type:"color"},null,8,["modelValue","label"])]),_:1}),e(t,{cols:"12",md:"4"},{default:o(()=>[e(n,{modelValue:l.config.DATA_UI_THEME_CUSTOM_ACCENT,"onUpdate:modelValue":s[20]||(s[20]=a=>l.config.DATA_UI_THEME_CUSTOM_ACCENT=a),label:l.labelFor("DATA_UI_THEME_CUSTOM_ACCENT"),type:"color"},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),e(p,{class:"pa-4 mb-4"},{default:o(()=>[r("div",G,d(l.t("settings.section.runtime")),1),e(f,null,{default:o(()=>[e(t,{cols:"12",md:"4"},{default:o(()=>[e(A,{modelValue:l.config.DATA_UI_TIMEZONE,"onUpdate:modelValue":s[21]||(s[21]=a=>l.config.DATA_UI_TIMEZONE=a),items:l.timezoneOptions,label:l.labelFor("DATA_UI_TIMEZONE")},null,8,["modelValue","items","label"])]),_:1}),e(t,{cols:"12",md:"8",class:"d-flex align-center ga-2"},{default:o(()=>[e(V,{variant:"tonal",color:"info"},{default:o(()=>[i(d(l.t("settings.cache.stats",{files:l.thumbCacheStats.files||0,mb:l.thumbCacheStats.mb||0,latest:l.thumbCacheStats.latest_at||"-"})),1)]),_:1}),e(g,{variant:"outlined",color:"warning",onClick:l.clearThumbCacheAction},{default:o(()=>[i(d(l.t("settings.cache.clear")),1)]),_:1},8,["onClick"])]),_:1}),e(t,{cols:"12",md:"12",class:"d-flex align-center ga-2 flex-wrap"},{default:o(()=>{var a;return[e(V,{variant:"tonal",color:"secondary"},{default:o(()=>{var u;return[i(d(l.t("settings.model.siglip_status",{mb:((u=l.modelStatus.siglip)==null?void 0:u.size_mb)||0})),1)]}),_:1}),e(V,{variant:"tonal",color:(a=l.modelStatus.runtime_deps)!=null&&a.ready?"success":"warning"},{default:o(()=>{var u,m;return[i(d(l.t("settings.model.runtime_deps",{mb:((u=l.modelStatus.runtime_deps)==null?void 0:u.size_mb)||0,ready:(m=l.modelStatus.runtime_deps)!=null&&m.ready?"yes":"no"})),1)]}),_:1},8,["color"]),e(g,{variant:"outlined",color:"primary",onClick:l.downloadSiglipAction},{default:o(()=>[i(d(l.t("settings.model.siglip_download")),1)]),_:1},8,["onClick"]),e(g,{variant:"outlined",color:"error",onClick:l.clearSiglipAction},{default:o(()=>[i(d(l.t("settings.model.siglip_clear")),1)]),_:1},8,["onClick"]),e(g,{variant:"outlined",color:"warning",onClick:l.clearRuntimeDepsAction},{default:o(()=>[i(d(l.t("settings.model.runtime_deps_clear")),1)]),_:1},8,["onClick"]),l.siglipDownload.status?(T(),O(V,{key:0,variant:"outlined"},{default:o(()=>[i(d(l.t("settings.model.siglip_task",{status:l.siglipDownload.status,stage:l.siglipDownload.stage||"-"})),1)]),_:1})):R("",!0)]}),_:1}),l.siglipDownload.status&&l.siglipDownload.status!=="done"?(T(),O(t,{key:0,cols:"12",md:"12"},{default:o(()=>[e(I,{"model-value":Number(l.siglipDownload.progress||0),color:"primary",height:"14"},{default:o(()=>[i(d(Number(l.siglipDownload.progress||0))+"%",1)]),_:1},8,["model-value"]),l.siglipDownload.error?(T(),_("div",N,d(l.siglipDownload.error),1)):R("",!0)]),_:1})):R("",!0),Array.isArray(l.siglipDownload.logs)&&l.siglipDownload.logs.length?(T(),O(t,{key:1,cols:"12",md:"12"},{default:o(()=>[r("div",c,d(l.siglipDownload.logs.slice(-8).join(`
`)),1)]),_:1})):R("",!0)]),_:1})]),_:1})],64)}const q=M(h,[["render",Y]]);export{q as default};
